# KnProxy-APJP
KnProxy Lambda是结合KnProxy和APJP的一个网页代理 
KnProxy Lambda是KnProxy WEB代理的一个分支，它应用了JAVA和PHP合作的技术，为用户提供全面的平衡的代理。Java客户端和PHP服务端之间的通信通过高级的加密算法加 密，同时流量被分散到多个服务器来避免流量分析。KnProxy Lambda能提供强于KnProxy的全面网络代理服务。可以完美支持POST，GET，和AJAX请求。同时KnProxy Lambda还兼容apjp服务器，可以直接使用已有的APJP服务器并用其分担流量，扩大网络范围，方便用户迁移。
以前的KnProxy代理请参考：自建安全翻墙代理服务器 KnProxy教程
KnProxy Lambda官方项目主页：
http://sourceforge.net/projects/level5/
http://freshmeat.net/projects/knproxy-lambda
官方版本下载：KnProxy Lambda v5
2011-07-18 服务器v5.00 下载：
knproxy_lambda_server_apjp_v5_00.zip
2011-10-26 客户端v5.00RC2 下载：
knproxy_lambda_client_v5_00_RC2.zip
概述：
简单说来，KnProxy Lambda是结合KnProxy和APJP的一个网页代理，先后对而言，因为有客户端图形界面程序，更易操作，设置也比较简单。
步骤就是：第一步，找到一个服务器空间，上传配置好的KnProxy程序；第二步，配置客户端，第三步，浏览器代理设置；
下面介绍详细的使用方法：
（一）搭建KnP V5 服务端：
搭建KnP V5 服务端：
1. 准备工作：
KnP V5需要用到php的sockets和rc4加密模块，所以说并不是所有的服务器都兼容。如果您搭建后无法正常运行，请更换服务器（这里特别推荐 000webhost 这个免费服务器，速度还不错，搭建也比较成功）。
按照上述地址，下载最新版本，将文件解压缩，里面是 4个文件。
因为KnP V5目前使用的APJP服务器程序，搭建KnP V5服务器端与APJP差不多，详细请参考：
安全翻墙APJP：基于PHP和JAVA的代理构建最新版教程
下面是简要的主要步骤介绍，按照这个一步一步配置也行：
2. 配置密码：
为了保证传输不被 a)第三方盗用 b)GFW阻挡，建议你不要用默认的密码。
打开压缩文件的 HTTP.properties.php 里面只有一行：
$APJP_KEY = 'MisakaMikoto';
把这个改成你自己的密码即可（长度在 5-16 个字符即可，由于美国对强加密算法出口规制，超过16位的RC4加密需要安装特殊JAVA配置文件，为了避免客户端不能解密，建议密码短些，我们的目标不是搞的多安全而是能PASS掉GFW）。
3. 架设
超简单，请在服务器新建文件夹，上传即可！
4.常见问题
有的时候架设后客户端也配置正确可能无法使用，这些情况下可能是
a) 您的服务器供应商不允许使用php sockets或者加密（能用KnP V4de 服务器不一定能支持v5）
b) 您的密码太长，JAVA客户端不能解析
c) 页面可以出现，底部有乱码：您的服务器可能会自动追加广告信息等，请忽略掉就是了…后续版本会致力解决这个问题
在上面配置好服务器端后，再配置好客户端就可以使用自建的安全代理服务器了。
（二）KnProxy Lambda 客户端使用说明
1. 预备工作
KnProxy V5的客户端基于Java编写，电脑上必须安装有足够新的 Java 虚拟机。
最新的Java虚拟机可以在：http://www.java.com/zh_CN/download/ 获得。
2. 客户端的图形界面程序与添加服务器
作者设计了客户端的图形界面程序，相当的方便。 在自己的电脑上解压最新的客户端程序后，双击运行其中的 KnProxyV5.exe 即可。
如果不是 Windows系统，请打开终端，输入 java -jar KnProxyV5.jar 也可以。如果您的Java版本不够高，Windows用户会得到提示。
运行KnProxyV5.exe后的 KnProxy V5 运行界面如图所示：

KnProxy的用户界面很直观，分为菜单、启动状态、服务器列表，操作按钮。
默认的KnProxy带有2个供测试用的服务器，为了安全起见，可以删除之，然后通过左下角的“添加服务器”按钮来添加自己的服务器。
请注意：服务器删除会立即生效，但是添加服务器需要重新启动代理软件。
其实客户端配置也就这一步，把自己的服务器添加上去就好，不需要更多设置，然后，点右下角的“启动”按钮，你会看到服务器状态变为 “已启动（监听 127.0.0.1:5000）” 。
请记住KnProxy的代理是：127.0.0.1:5000，余下的就是在浏览器中设置代理。
4. 浏览器代理设置
如上所述，我们要使用KnProxy代理，在自己的浏览器中要设置“代理服务器”：127.0.0.1 “端口”：5000
有关代理的设置，我们推荐使用firefox+gproxy来设置，相当的方便。请参考：
GProxy:调度代理的火狐firefox扩展(v1.67)
http://allinfa.com/gproxy.html
如果要缩小KnProxy的窗口，请打开点“文件”-- “收缩到任务栏”。收缩后，双击任务栏图标即可还原。
5.在上述所有配置完成后，与平时一样，在浏览器中输入网页地址就可以代理上网了。
上网的代理ip情况可以打开美博园IP查询页检测：美博园 上网IP地址参数 检测
最后补充官方介绍的特点：
KnProxy Lambda 基于KnProxy的浏览内核 KnHTTP 模块的改进版，KnProxy V5 将会让更多的免费空间也能够使用高级的代理服务。
KnProxy V5的处理引擎将参考 APJP( A PHP/Java Proxy)的运行模式，采取客户+服务器端双处理的模式。客户端由Java编写的Proxy将会对浏览器请求捕捉，处理，加密，测速并发送到指定的的服务器列表中的服务器上。服务器则将请求传达，获取结果，加密，传回KnProxy客户端。
增强的RC4加密：相比于KnProxy那幼稚的“地址混乱化”KNEN加密，RC4加密大大提升了传输的安全程度，而且请求和回应双向加密，很安全。群过程采取了 RC4 或 KNEN 加密，动态密钥，保证数据不会被劫持。同时用cURL 模块部分解决了 APJP 的 HTTPS 问题。
允许把压力分担到多个服务器：在原来的情况下，如果连续访问国外主机，往往会出现被 Connection Reset 的危险，不管是不是传输比较敏感的信息。KnProxy V5 客户端将允许设立服务器列表，访问网站会根据用户设定的优先级，服务器速度综合选择合适的服务器。新的模式允许在你设定的代理服务器之间随机跳动，不是对一个服务器使劲用，所以大大减小了被流量监测的危险,请求被分担到了多个服务器，所以大大降低了服务器的负担，增加了隐私度。
新的客户端模式还会允许用户在服务器列表枯竭时，从一个指定的服务器获取新的服务器更新，时时保持代理畅通。全线突破GFW的阻碍。列表每次获取有限，而且不允许直接获取，避免GFW 内部人士借以嗅探 KnProxy 服务器。
兼容APJP：服务器使用的是APJP的服务器端，KnProxy V5将全线兼容 APJP 服务器，允许用户使用已经架设好的 APJP服务器与优化的服务器选择规划算法结合，得到理想的速度。
缩到任务栏：避免代理窗口妨碍视线，所以可以缩到任务栏。双击就可以打开了。
以上根据官方介绍和自己的使用情况整理。如有什么问题，请使用者反馈，以便反馈作者改進。谢谢作者jabbany为大家提供好的翻墙工具。

本文來源：http://allinfa.com/knproxy-lambda.html
